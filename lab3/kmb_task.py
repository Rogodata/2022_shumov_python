import pygame
import pygame.draw as dr
import math
from random import randint


def draw_ellipse_angle(surface, color, rect, angle, width=0):
    target_rect = pygame.Rect(rect)
    shape_surf = pygame.Surface(target_rect.size, pygame.SRCALPHA)
    pygame.draw.ellipse(shape_surf, color, (0, 0, *target_rect.size), width)
    rotated_surf = pygame.transform.rotate(shape_surf, angle)
    surface.blit(rotated_surf, rotated_surf.get_rect(center=target_rect.center))


def igla(x1, y1, x2, y2, l, screen_canvas):
    k = (y2 - y1) / (x2 - x1)
    dr.polygon(screen_canvas, (44, 20, 26), [(x1, y1), (x2, y2),
                                             ((x1 + x2) / 2 - l * math.copysign(1, - 1 / k) * math.cos(
                                                 math.atan((-1 / k))),
                                              y1 - (x2 - x1) / 2 * k - abs(l * math.sin(math.atan(abs(-1 / k))))),
                                             (x1, y1)])
    dr.polygon(screen_canvas, (0, 0, 0), [(x1, y1), (x2, y2),
                                          (
                                              (x1 + x2) / 2 - l * math.copysign(1, - 1 / k) * math.cos(
                                                  math.atan((-1 / k))),
                                              y1 - (x2 - x1) / 2 * k - abs(l * math.sin(math.atan(abs(-1 / k))))),
                                          (x1, y1)],
               width=1)


pygame.init()

FPS = 30
screen = pygame.display.set_mode((650, 900))

dr.rect(screen, (32, 153, 82), (0, 0, 650, 550))
dr.rect(screen, (86, 76, 70), (0, 550, 650, 350))
dr.rect(screen, (206, 156, 30), (0, 0, 50, 600))
dr.rect(screen, (206, 156, 30), (90, 0, 150, 850))
dr.rect(screen, (206, 156, 30), (470, 0, 50, 600))
dr.rect(screen, (206, 156, 30), (590, 0, 40, 700))
dr.ellipse(screen, (63, 45, 31), (310, 700, 260, 100))
dr.ellipse(screen, (104, 102, 103), (310, 700, 260, 100), width=1)
dr.ellipse(screen, (63, 45, 31), (300, 760, 32, 17))
dr.ellipse(screen, (104, 102, 103), (300, 760, 32, 17), width=1)
dr.ellipse(screen, (63, 45, 31), (330, 780, 30, 15))
dr.ellipse(screen, (104, 102, 103), (330, 780, 30, 15), width=1)
dr.ellipse(screen, (63, 45, 31), (520, 780, 30, 15))
dr.ellipse(screen, (104, 102, 103), (520, 780, 30, 15), width=1)
dr.ellipse(screen, (63, 45, 31), (545, 760, 25, 15))
dr.ellipse(screen, (104, 102, 103), (545, 760, 25, 15), width=1)
dr.ellipse(screen, (63, 45, 31), (540, 730, 50, 30))
dr.ellipse(screen, (104, 102, 103), (540, 730, 50, 30), width=1)
dr.ellipse(screen, (63, 45, 31), (589, 744, 5, 5))
dr.ellipse(screen, (104, 102, 103), (589, 744, 5, 5), width=1)
dr.ellipse(screen, (0, 0, 0), (560, 730, 7, 7))
dr.ellipse(screen, (104, 102, 103), (560, 730, 7, 7), width=1)
dr.ellipse(screen, (0, 0, 0), (550, 740, 7, 7))
dr.ellipse(screen, (104, 102, 103), (550, 740, 7, 7), width=1)
igla(500, 720, 510, 721, 70, screen)
igla(510, 721, 520, 722, 70, screen)
igla(520, 722, 530, 724, 70, screen)
igla(530, 724, 540, 726, 70, screen)
igla(540, 726, 550, 729, 70, screen)
igla(490, 721, 500, 720, 70, screen)
igla(480, 722, 490, 721, 70, screen)
igla(475, 721, 480, 722, 70, screen)
igla(465, 722, 470, 721, 70, screen)
igla(455, 721, 460, 722, 70, screen)
igla(445, 722, 450, 721, 70, screen)
igla(435, 721, 440, 722, 70, screen)
igla(425, 721, 430, 722, 64, screen)
igla(415, 722, 420, 720, 70, screen)
igla(405, 720, 410, 722, 66, screen)
igla(395, 720, 400, 721, 69, screen)
igla(385, 721, 390, 723, 70, screen)
igla(375, 721, 380, 722, 64, screen)
igla(365, 722, 370, 720, 70, screen)
igla(355, 720, 360, 722, 66, screen)
igla(345, 720, 350, 721, 69, screen)
igla(335, 721, 340, 723, 70, screen)

igla_x1 = []
igla_x2 = []
igla_y1 = []
igla_y2 = []
lengths = []

for i in range(90):
    x1 = randint(320, 530)
    y1 = randint(720, 770)
    x2 = randint(x1 + 5, x1 + 10)
    y2 = y1 + int(math.copysign(randint(1, 3), randint(-1, 1)))
    length = randint(50, 90)
    # igla(x1, y1, x2, y2, randint(50, 90), screen)
    igla_x1.append(x1)
    igla_x2.append(x2)
    igla_y1.append(y1)
    igla_y2.append(y2)
    lengths.append(length)

igla(492, 762, 498, 764, 57, screen)
igla(412, 767, 417, 765, 82, screen)
igla(341, 762, 351, 764, 53, screen)
igla(410, 737, 416, 738, 71, screen)
igla(458, 722, 465, 723, 56, screen)
igla(529, 741, 538, 743, 64, screen)
igla(344, 734, 349, 737, 83, screen)
igla(520, 736, 526, 737, 61, screen)
igla(446, 758, 456, 756, 83, screen)
igla(405, 740, 414, 737, 74, screen)
igla(470, 763, 479, 765, 66, screen)
igla(460, 724, 466, 725, 81, screen)
igla(412, 757, 420, 758, 73, screen)
igla(369, 722, 379, 724, 82, screen)
igla(327, 759, 337, 756, 66, screen)
igla(324, 757, 334, 758, 80, screen)
igla(336, 763, 343, 760, 86, screen)
igla(396, 749, 406, 752, 78, screen)
igla(360, 732, 369, 735, 90, screen)
igla(394, 769, 402, 772, 62, screen)
igla(356, 760, 362, 759, 90, screen)
igla(405, 732, 415, 730, 66, screen)
igla(385, 765, 391, 762, 89, screen)
igla(379, 722, 389, 723, 57, screen)
igla(450, 753, 457, 755, 57, screen)
igla(460, 755, 469, 753, 77, screen)
igla(339, 733, 349, 735, 51, screen)
igla(381, 730, 386, 731, 61, screen)
igla(366, 740, 372, 738, 53, screen)
igla(483, 749, 488, 750, 52, screen)
igla(462, 739, 470, 737, 57, screen)
igla(414, 736, 423, 739, 50, screen)
igla(492, 753, 502, 750, 83, screen)
igla(474, 759, 482, 762, 59, screen)
igla(512, 732, 520, 731, 58, screen)
igla(424, 735, 429, 737, 77, screen)
igla(397, 753, 406, 755, 81, screen)
igla(346, 747, 351, 749, 64, screen)
igla(506, 732, 514, 735, 68, screen)
igla(373, 742, 382, 745, 50, screen)
igla(435, 742, 445, 745, 54, screen)
igla(330, 760, 337, 763, 84, screen)
igla(501, 746, 511, 749, 74, screen)
igla(422, 742, 429, 745, 57, screen)
igla(459, 748, 467, 749, 56, screen)
igla(382, 743, 390, 741, 60, screen)
igla(457, 732, 467, 733, 50, screen)
igla(412, 742, 420, 745, 83, screen)
igla(391, 761, 401, 758, 80, screen)
igla(472, 757, 482, 755, 73, screen)
igla(481, 736, 486, 737, 53, screen)
igla(326, 766, 331, 763, 62, screen)
igla(510, 758, 515, 761, 78, screen)
igla(444, 741, 453, 743, 85, screen)
igla(396, 735, 405, 737, 50, screen)
igla(394, 736, 403, 739, 90, screen)
igla(412, 765, 422, 767, 81, screen)
igla(398, 729, 403, 728, 72, screen)
igla(451, 740, 456, 738, 63, screen)
igla(329, 757, 337, 759, 77, screen)
igla(366, 757, 375, 756, 72, screen)
igla(382, 758, 387, 760, 79, screen)
igla(383, 748, 390, 745, 83, screen)
igla(524, 749, 533, 751, 67, screen)
igla(397, 741, 403, 742, 58, screen)
igla(378, 734, 383, 736, 65, screen)
igla(328, 726, 334, 725, 82, screen)
igla(524, 752, 534, 754, 80, screen)
igla(462, 742, 470, 745, 85, screen)
igla(438, 741, 444, 744, 81, screen)
igla(343, 755, 350, 756, 56, screen)
igla(509, 759, 515, 761, 65, screen)
igla(442, 735, 447, 738, 87, screen)
igla(378, 757, 386, 754, 73, screen)
igla(487, 764, 492, 765, 73, screen)
igla(465, 747, 471, 750, 78, screen)
igla(395, 756, 402, 759, 85, screen)
igla(424, 770, 431, 772, 52, screen)
igla(378, 768, 384, 769, 67, screen)
igla(456, 770, 464, 767, 77, screen)
igla(424, 758, 434, 761, 62, screen)
igla(472, 750, 479, 749, 64, screen)
igla(496, 755, 503, 757, 88, screen)
igla(437, 753, 442, 756, 67, screen)
igla(506, 750, 515, 751, 64, screen)
igla(480, 753, 489, 752, 51, screen)
igla(363, 736, 368, 733, 54, screen)
igla(502, 752, 512, 749, 53, screen)
igla(453, 725, 463, 728, 84, screen)
igla(408, 726, 413, 729, 68, screen)
draw_ellipse_angle(screen, (0,0,0), [380, 650, 80, 30], -30, 2)


for i in range(90):
    print("igla(" + str(igla_x1[i]) + ", " + str(igla_y1[i]) + ", " + str(igla_x2[i]) + ", " + str(
        igla_y2[i]) + ", " + str(lengths[i]) + ", screen)")

pygame.display.update()
clock = pygame.time.Clock()
finished = False

while not finished:
    clock.tick(FPS)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            finished = True

pygame.quit()

'''
igla(492, 762, 498, 764, 57, screen)
igla(412, 767, 417, 765, 82, screen)
igla(341, 762, 351, 764, 53, screen)
igla(410, 737, 416, 738, 71, screen)
igla(458, 722, 465, 723, 56, screen)
igla(529, 741, 538, 743, 64, screen)
igla(344, 734, 349, 737, 83, screen)
igla(520, 736, 526, 737, 61, screen)
igla(446, 758, 456, 756, 83, screen)
igla(405, 740, 414, 737, 74, screen)
igla(470, 763, 479, 765, 66, screen)
igla(460, 724, 466, 725, 81, screen)
igla(412, 757, 420, 758, 73, screen)
igla(369, 722, 379, 724, 82, screen)
igla(327, 759, 337, 756, 66, screen)
igla(324, 757, 334, 758, 80, screen)
igla(336, 763, 343, 760, 86, screen)
igla(396, 749, 406, 752, 78, screen)
igla(360, 732, 369, 735, 90, screen)
igla(394, 769, 402, 772, 62, screen)
igla(356, 760, 362, 759, 90, screen)
igla(405, 732, 415, 730, 66, screen)
igla(385, 765, 391, 762, 89, screen)
igla(379, 722, 389, 723, 57, screen)
igla(450, 753, 457, 755, 57, screen)
igla(460, 755, 469, 753, 77, screen)
igla(339, 733, 349, 735, 51, screen)
igla(381, 730, 386, 731, 61, screen)
igla(366, 740, 372, 738, 53, screen)
igla(483, 749, 488, 750, 52, screen)
igla(462, 739, 470, 737, 57, screen)
igla(414, 736, 423, 739, 50, screen)
igla(492, 753, 502, 750, 83, screen)
igla(474, 759, 482, 762, 59, screen)
igla(512, 732, 520, 731, 58, screen)
igla(424, 735, 429, 737, 77, screen)
igla(397, 753, 406, 755, 81, screen)
igla(346, 747, 351, 749, 64, screen)
igla(506, 732, 514, 735, 68, screen)
igla(373, 742, 382, 745, 50, screen)
igla(435, 742, 445, 745, 54, screen)
igla(330, 760, 337, 763, 84, screen)
igla(501, 746, 511, 749, 74, screen)
igla(422, 742, 429, 745, 57, screen)
igla(459, 748, 467, 749, 56, screen)
igla(382, 743, 390, 741, 60, screen)
igla(457, 732, 467, 733, 50, screen)
igla(412, 742, 420, 745, 83, screen)
igla(391, 761, 401, 758, 80, screen)
igla(472, 757, 482, 755, 73, screen)
igla(481, 736, 486, 737, 53, screen)
igla(326, 766, 331, 763, 62, screen)
igla(510, 758, 515, 761, 78, screen)
igla(444, 741, 453, 743, 85, screen)
igla(396, 735, 405, 737, 50, screen)
igla(394, 736, 403, 739, 90, screen)
igla(412, 765, 422, 767, 81, screen)
igla(398, 729, 403, 728, 72, screen)
igla(451, 740, 456, 738, 63, screen)
igla(329, 757, 337, 759, 77, screen)
igla(366, 757, 375, 756, 72, screen)
igla(382, 758, 387, 760, 79, screen)
igla(383, 748, 390, 745, 83, screen)
igla(524, 749, 533, 751, 67, screen)
igla(397, 741, 403, 742, 58, screen)
igla(378, 734, 383, 736, 65, screen)
igla(328, 726, 334, 725, 82, screen)
igla(524, 752, 534, 754, 80, screen)
igla(462, 742, 470, 745, 85, screen)
igla(438, 741, 444, 744, 81, screen)
igla(343, 755, 350, 756, 56, screen)
igla(509, 759, 515, 761, 65, screen)
igla(442, 735, 447, 738, 87, screen)
igla(378, 757, 386, 754, 73, screen)
igla(487, 764, 492, 765, 73, screen)
igla(465, 747, 471, 750, 78, screen)
igla(395, 756, 402, 759, 85, screen)
igla(424, 770, 431, 772, 52, screen)
igla(378, 768, 384, 769, 67, screen)
igla(456, 770, 464, 767, 77, screen)
igla(424, 758, 434, 761, 62, screen)
igla(472, 750, 479, 749, 64, screen)
igla(496, 755, 503, 757, 88, screen)
igla(437, 753, 442, 756, 67, screen)
igla(506, 750, 515, 751, 64, screen)
igla(480, 753, 489, 752, 51, screen)
igla(363, 736, 368, 733, 54, screen)
igla(502, 752, 512, 749, 53, screen)
igla(453, 725, 463, 728, 84, screen)
igla(408, 726, 413, 729, 68, screen) '''
