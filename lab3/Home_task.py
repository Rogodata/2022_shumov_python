import pygame
import pygame.draw as dr
import math


# Та же функция
def draw_mukhomor(x, y, lx, ly, angle, screen):
    shape_surf = pygame.Surface([max(lx, ly), max(lx, ly)], pygame.SRCALPHA)
    dr.ellipse(shape_surf, (160, 160, 160), [lx / 2 - ly / 2, 0, ly, lx])
    dr.ellipse(shape_surf, (104, 102, 103), [lx / 2 - ly / 2, 0, ly, lx], width=1)
    dr.ellipse(shape_surf, (212, 50, 19), [0, 0, lx, ly])
    dr.ellipse(shape_surf, (104, 102, 103), [0, 0, lx, ly], width=1)
    dr.ellipse(shape_surf, (255, 255, 255), [lx / 4, ly / 4, lx / 8, ly / 6])
    dr.ellipse(shape_surf, (255, 255, 255), [lx / 2, ly / 3, lx / 6, ly / 7])
    dr.ellipse(shape_surf, (255, 255, 255), [3 * lx / 4, ly / 4, lx / 6, ly / 7])
    rotated_surf = pygame.transform.rotate(shape_surf, angle)
    screen.blit(rotated_surf, dest=[x, y])


# Та же функция
def igla(x1, y1, x2, y2, l, screen_canvas):
    k = (y2 - y1) / (x2 - x1)
    dr.polygon(screen_canvas, (44, 20, 26), [(x1, y1), (x2, y2),
                                             ((x1 + x2) / 2 - l * math.copysign(1, - 1 / k) * math.cos(
                                                 math.atan((-1 / k))),
                                              y1 - (x2 - x1) / 2 * k - abs(l * math.sin(math.atan(abs(-1 / k))))),
                                             (x1, y1)])
    dr.polygon(screen_canvas, (0, 0, 0), [(x1, y1), (x2, y2),
                                          (
                                              (x1 + x2) / 2 - l * math.copysign(1, - 1 / k) * math.cos(
                                                  math.atan((-1 / k))),
                                              y1 - (x2 - x1) / 2 * k - abs(l * math.sin(math.atan(abs(-1 / k))))),
                                          (x1, y1)],
               width=1)


# Данная функция рисуе ежа на экране из предыдущей задачи а затем сжимает или увеличивает с последующей вставкой на этот экран
def draw_hedgehog(x, y, lx, ly, canva):
    screen = pygame.Surface([650, 900], pygame.SRCALPHA)
    shape_chop = pygame.Surface([300, 200], pygame.SRCALPHA)
    dr.ellipse(screen, (63, 45, 31), (310, 700, 260, 100))
    dr.ellipse(screen, (104, 102, 103), (310, 700, 260, 100), width=1)
    dr.ellipse(screen, (63, 45, 31), (300, 760, 32, 17))
    dr.ellipse(screen, (104, 102, 103), (300, 760, 32, 17), width=1)
    dr.ellipse(screen, (63, 45, 31), (330, 780, 30, 15))
    dr.ellipse(screen, (104, 102, 103), (330, 780, 30, 15), width=1)
    dr.ellipse(screen, (63, 45, 31), (520, 780, 30, 15))
    dr.ellipse(screen, (104, 102, 103), (520, 780, 30, 15), width=1)
    dr.ellipse(screen, (63, 45, 31), (545, 760, 25, 15))
    dr.ellipse(screen, (104, 102, 103), (545, 760, 25, 15), width=1)
    dr.ellipse(screen, (63, 45, 31), (540, 730, 50, 30))
    dr.ellipse(screen, (104, 102, 103), (540, 730, 50, 30), width=1)
    dr.ellipse(screen, (63, 45, 31), (589, 744, 5, 5))
    dr.ellipse(screen, (104, 102, 103), (589, 744, 5, 5), width=1)
    dr.ellipse(screen, (0, 0, 0), (570, 730, 7, 7))
    dr.ellipse(screen, (104, 102, 103), (570, 730, 7, 7), width=1)
    dr.ellipse(screen, (0, 0, 0), (560, 740, 7, 7))
    dr.ellipse(screen, (104, 102, 103), (560, 740, 7, 7), width=1)
    igla(500, 720, 510, 721, 70, screen)
    igla(510, 721, 520, 722, 70, screen)
    igla(520, 722, 530, 724, 70, screen)
    igla(530, 724, 540, 726, 70, screen)
    igla(540, 726, 550, 729, 70, screen)
    igla(490, 721, 500, 720, 70, screen)
    igla(480, 722, 490, 721, 70, screen)
    igla(475, 721, 480, 722, 70, screen)
    igla(465, 722, 470, 721, 70, screen)
    igla(455, 721, 460, 722, 70, screen)
    igla(445, 722, 450, 721, 70, screen)
    igla(435, 721, 440, 722, 70, screen)
    igla(425, 721, 430, 722, 64, screen)
    igla(415, 722, 420, 720, 70, screen)
    igla(405, 720, 410, 722, 66, screen)
    igla(395, 720, 400, 721, 69, screen)
    igla(385, 721, 390, 723, 70, screen)
    igla(375, 721, 380, 722, 64, screen)
    igla(365, 722, 370, 720, 70, screen)
    igla(355, 720, 360, 722, 66, screen)
    igla(345, 720, 350, 721, 69, screen)
    igla(335, 721, 340, 723, 70, screen)
    igla(492, 762, 498, 764, 57, screen)
    igla(412, 767, 417, 765, 82, screen)
    igla(341, 762, 351, 764, 53, screen)
    igla(410, 737, 416, 738, 71, screen)
    igla(458, 722, 465, 723, 56, screen)
    igla(529, 741, 538, 743, 64, screen)
    igla(344, 734, 349, 737, 83, screen)
    igla(520, 736, 526, 737, 61, screen)
    igla(446, 758, 456, 756, 83, screen)
    igla(405, 740, 414, 737, 74, screen)
    igla(470, 763, 479, 765, 66, screen)
    igla(460, 724, 466, 725, 81, screen)
    igla(412, 757, 420, 758, 73, screen)
    igla(369, 722, 379, 724, 82, screen)
    igla(327, 759, 337, 756, 66, screen)
    igla(324, 757, 334, 758, 80, screen)
    igla(336, 763, 343, 760, 86, screen)
    igla(396, 749, 406, 752, 78, screen)
    igla(360, 732, 369, 735, 90, screen)
    igla(394, 769, 402, 772, 62, screen)
    igla(356, 760, 362, 759, 90, screen)
    igla(405, 732, 415, 730, 66, screen)
    igla(385, 765, 391, 762, 89, screen)
    igla(379, 722, 389, 723, 57, screen)
    igla(450, 753, 457, 755, 57, screen)
    igla(460, 755, 469, 753, 77, screen)
    igla(339, 733, 349, 735, 51, screen)
    igla(381, 730, 386, 731, 61, screen)
    igla(366, 740, 372, 738, 53, screen)
    igla(483, 749, 488, 750, 52, screen)
    igla(462, 739, 470, 737, 57, screen)
    igla(414, 736, 423, 739, 50, screen)
    igla(492, 753, 502, 750, 83, screen)
    igla(474, 759, 482, 762, 59, screen)
    igla(512, 732, 520, 731, 58, screen)
    igla(424, 735, 429, 737, 77, screen)
    igla(397, 753, 406, 755, 81, screen)
    igla(346, 747, 351, 749, 64, screen)
    igla(506, 732, 514, 735, 68, screen)
    igla(373, 742, 382, 745, 50, screen)
    igla(435, 742, 445, 745, 54, screen)
    igla(330, 760, 337, 763, 84, screen)
    igla(501, 746, 511, 749, 74, screen)
    igla(422, 742, 429, 745, 57, screen)
    igla(459, 748, 467, 749, 56, screen)
    igla(382, 743, 390, 741, 60, screen)
    igla(457, 732, 467, 733, 50, screen)
    igla(412, 742, 420, 745, 83, screen)
    igla(391, 761, 401, 758, 80, screen)
    igla(472, 757, 482, 755, 73, screen)
    igla(481, 736, 486, 737, 53, screen)
    igla(326, 766, 331, 763, 62, screen)
    igla(510, 758, 515, 761, 78, screen)
    igla(444, 741, 453, 743, 85, screen)
    igla(396, 735, 405, 737, 50, screen)
    igla(394, 736, 403, 739, 90, screen)
    igla(412, 765, 422, 767, 81, screen)
    igla(398, 729, 403, 728, 72, screen)
    igla(451, 740, 456, 738, 63, screen)
    igla(329, 757, 337, 759, 77, screen)
    igla(366, 757, 375, 756, 72, screen)
    igla(382, 758, 387, 760, 79, screen)
    igla(383, 748, 390, 745, 83, screen)
    igla(524, 749, 533, 751, 67, screen)
    igla(397, 741, 403, 742, 58, screen)
    igla(378, 734, 383, 736, 65, screen)
    igla(328, 726, 334, 725, 82, screen)
    igla(524, 752, 534, 754, 80, screen)
    igla(462, 742, 470, 745, 85, screen)
    igla(438, 741, 444, 744, 81, screen)
    igla(343, 755, 350, 756, 56, screen)
    igla(509, 759, 515, 761, 65, screen)
    igla(442, 735, 447, 738, 87, screen)
    igla(378, 757, 386, 754, 73, screen)
    igla(487, 764, 492, 765, 73, screen)
    igla(465, 747, 471, 750, 78, screen)
    igla(395, 756, 402, 759, 85, screen)
    igla(424, 770, 431, 772, 52, screen)
    igla(378, 768, 384, 769, 67, screen)
    igla(456, 770, 464, 767, 77, screen)
    igla(424, 758, 434, 761, 62, screen)
    igla(472, 750, 479, 749, 64, screen)
    igla(496, 755, 503, 757, 88, screen)
    igla(437, 753, 442, 756, 67, screen)
    igla(506, 750, 515, 751, 64, screen)
    igla(480, 753, 489, 752, 51, screen)
    igla(363, 736, 368, 733, 54, screen)
    igla(502, 752, 512, 749, 53, screen)
    igla(453, 725, 463, 728, 84, screen)
    igla(408, 726, 413, 729, 68, screen)

    draw_mukhomor(380, 650, 70, 30, -25, screen)
    dr.ellipse(screen, (228, 43, 13), (470, 670, 50, 50))
    dr.ellipse(screen, (104, 102, 103), (470, 670, 50, 50), width=1)
    dr.ellipse(screen, (227, 133, 13), (340, 680, 50, 50))
    dr.ellipse(screen, (104, 102, 103), (340, 680, 50, 50), width=1)
    dr.ellipse(screen, (227, 133, 13), (320, 685, 50, 50))
    dr.ellipse(screen, (104, 102, 103), (320, 685, 50, 50), width=1)
    igla(533, 774, 543, 777, 81, screen)
    igla(380, 780, 385, 783, 80, screen)
    igla(381, 774, 390, 772, 51, screen)
    igla(529, 780, 534, 778, 80, screen)
    igla(348, 776, 353, 778, 50, screen)
    igla(418, 785, 426, 782, 56, screen)
    igla(344, 773, 349, 770, 80, screen)
    igla(529, 781, 538, 779, 65, screen)
    igla(467, 781, 472, 779, 59, screen)
    igla(466, 783, 474, 784, 57, screen)
    igla(463, 780, 468, 778, 51, screen)
    igla(341, 775, 349, 778, 80, screen)
    igla(404, 771, 409, 774, 66, screen)
    igla(440, 780, 448, 779, 83, screen)
    igla(504, 771, 511, 773, 88, screen)
    igla(391, 782, 398, 784, 77, screen)
    igla(440, 775, 445, 776, 70, screen)
    igla(431, 776, 438, 774, 62, screen)
    igla(487, 784, 492, 787, 51, screen)
    igla(516, 771, 524, 772, 85, screen)
    igla(458, 776, 464, 779, 83, screen)
    igla(344, 776, 349, 774, 66, screen)
    igla(377, 775, 385, 774, 86, screen)
    igla(447, 774, 455, 771, 80, screen)
    igla(453, 778, 462, 781, 70, screen)
    igla(330, 774, 338, 775, 53, screen)
    igla(389, 780, 399, 783, 79, screen)
    igla(423, 773, 430, 776, 90, screen)
    igla(481, 774, 487, 776, 55, screen)
    igla(512, 775, 517, 778, 65, screen)
    igla(368, 778, 377, 776, 77, screen)
    igla(497, 783, 504, 786, 80, screen)
    igla(514, 775, 524, 776, 85, screen)
    igla(356, 772, 361, 770, 52, screen)
    igla(400, 785, 406, 788, 57, screen)
    igla(430, 775, 436, 777, 90, screen)
    igla(521, 774, 528, 776, 62, screen)
    igla(528, 772, 538, 771, 71, screen)
    igla(417, 786, 425, 789, 59, screen)
    igla(478, 774, 484, 773, 59, screen)
    igla(459, 781, 466, 784, 87, screen)
    igla(347, 775, 355, 772, 75, screen)
    igla(395, 783, 405, 780, 62, screen)
    igla(422, 777, 427, 774, 86, screen)
    igla(344, 782, 352, 779, 70, screen)
    igla(415, 785, 424, 786, 79, screen)
    igla(419, 777, 426, 775, 82, screen)
    igla(527, 772, 532, 775, 59, screen)
    igla(473, 778, 482, 775, 90, screen)
    igla(509, 773, 518, 775, 51, screen)
    igla(356, 780, 364, 781, 90, screen)
    igla(376, 771, 385, 772, 70, screen)
    igla(364, 779, 370, 782, 50, screen)
    igla(535, 771, 543, 772, 61, screen)
    igla(352, 772, 357, 774, 71, screen)
    igla(434, 775, 440, 777, 53, screen)
    igla(340, 771, 350, 773, 72, screen)
    igla(379, 774, 386, 775, 57, screen)
    igla(447, 777, 453, 778, 59, screen)
    igla(429, 784, 434, 785, 80, screen)
    igla(356, 774, 364, 777, 78, screen)
    igla(514, 778, 523, 776, 68, screen)
    igla(508, 776, 518, 778, 80, screen)
    igla(462, 770, 470, 772, 63, screen)
    igla(403, 777, 408, 780, 85, screen)
    igla(442, 785, 450, 788, 88, screen)
    igla(398, 777, 403, 780, 72, screen)
    igla(331, 776, 340, 779, 60, screen)
    igla(357, 783, 363, 784, 87, screen)
    igla(359, 772, 364, 771, 89, screen)
    igla(367, 777, 375, 779, 67, screen)
    igla(360, 775, 367, 774, 86, screen)
    igla(365, 781, 373, 784, 62, screen)
    igla(473, 783, 482, 782, 52, screen)
    igla(534, 786, 540, 785, 55, screen)
    igla(491, 781, 496, 782, 52, screen)
    igla(363, 779, 373, 778, 51, screen)
    igla(507, 782, 513, 779, 53, screen)
    igla(511, 771, 519, 773, 76, screen)
    igla(466, 786, 476, 785, 52, screen)
    igla(496, 782, 504, 783, 69, screen)
    igla(440, 775, 445, 777, 65, screen)
    igla(497, 773, 503, 776, 50, screen)
    igla(413, 776, 418, 778, 82, screen)
    igla(501, 771, 509, 769, 85, screen)
    igla(441, 777, 449, 776, 80, screen)
    igla(432, 771, 441, 773, 71, screen)
    igla(450, 785, 456, 787, 61, screen)
    igla(496, 778, 505, 779, 53, screen)
    igla(441, 776, 447, 773, 71, screen)
    shape_chop.blit(screen, area=[300, 600, 300, 200], dest=[0, 0])
    shape_scaled = pygame.transform.scale(shape_chop, [lx, ly])
    canva.blit(shape_scaled, area=[0, 0, 300, 200], dest=[x, y])


pygame.init()

FPS = 30

screen1 = pygame.display.set_mode((650, 900))

# Фон
dr.rect(screen1, (32, 153, 82), (0, 0, 650, 550))
dr.rect(screen1, (104, 102, 103), (0, 0, 650, 550), width=1)
dr.rect(screen1, (86, 76, 70), (0, 550, 650, 350))
dr.rect(screen1, (104, 102, 103), (0, 550, 650, 350), width=1)
draw_hedgehog(110, 460, 250, 150, screen1)
dr.rect(screen1, (206, 156, 30), (0, 0, 50, 600))
dr.rect(screen1, (104, 102, 103), (0, 0, 50, 600), width=1)
dr.rect(screen1, (206, 156, 30), (90, 0, 150, 850))
dr.rect(screen1, (104, 102, 103), (90, 0, 150, 850), width=1)
dr.rect(screen1, (206, 156, 30), (470, 0, 50, 600))
dr.rect(screen1, (104, 102, 103), (470, 0, 50, 600), width=1)
dr.rect(screen1, (206, 156, 30), (590, 0, 40, 700))
dr.rect(screen1, (104, 102, 103), (590, 0, 40, 700), width=1)
# Ежи
draw_hedgehog(310, 600, 300, 200, screen1)
draw_hedgehog(500, 450, 250, 150, screen1)
draw_hedgehog(-100, 700, 250, 150, screen1)
# Мухоморы
draw_mukhomor(270, 800, 140, 30, 0, screen1)
draw_mukhomor(370, 840, 80, 17, 0, screen1)
draw_mukhomor(470, 810, 130, 30, -10, screen1)
draw_mukhomor(540, 800, 140, 30, 20, screen1)
draw_mukhomor(440, 845, 90, 21, 7, screen1)

pygame.display.update()
clock = pygame.time.Clock()
finished = False

while not finished:
    clock.tick(FPS)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            finished = True

pygame.quit()
